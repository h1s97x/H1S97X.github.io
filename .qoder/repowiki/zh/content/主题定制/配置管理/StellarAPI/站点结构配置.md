# 站点结构配置

站点结构配置（`site_tree`）定义了网站各类页面的布局、侧边栏组件和导航标签。

## 配置概览

`site_tree` 包含以下页面类型的配置：

### 列表类页面
- `home` - 主页
- `index_blog` - 博客列表页
- `index_topic` - 专栏列表页
- `index_wiki` - 文档列表页
- `notebooks` - 笔记本列表页
- `notes` - 笔记列表页

### 内容类页面
- `post` - 博客文章内页
- `topic` - 专栏文章内页
- `wiki` - 文档内页
- `note` - 笔记内页

### 其他页面
- `author` - 作者信息页
- `error_page` - 错误页面
- `page` - 自定义页面

## 通用配置项

每个页面类型支持以下配置项：

| 字段 | 类型 | 说明 |
|------|------|------|
| base_dir | string | 页面路径前缀（仅列表页） |
| menu_id | string | 高亮的主导航菜单 ID |
| leftbar | string | 左侧边栏组件列表（逗号分隔） |
| rightbar | string | 右侧边栏组件列表（逗号分隔） |
| nav_tabs | object | 导航标签页配置（仅列表页） |

## 侧边栏组件

### 可用组件列表

| 组件名 | 说明 | 适用位置 |
|--------|------|----------|
| welcome | 欢迎卡片 | 左侧栏 |
| toc | 文章目录 | 右侧栏 |
| recent | 最近更新 | 左/右侧栏 |
| related | 相关文章 | 左侧栏 |
| timeline | 时间线 | 左/右侧栏 |
| tree | 文档树 | 左侧栏 |
| tagtree | 标签树 | 左侧栏 |
| ghrepo | GitHub 仓库信息 | 右侧栏 |

### 组件使用示例

```yaml
# 单个组件
leftbar: welcome

# 多个组件（逗号分隔，按顺序显示）
leftbar: welcome, recent, timeline

# 不显示侧边栏
rightbar: null
```

## 页面配置详解

### home - 主页配置

```yaml
home:
  leftbar: welcome, recent
  rightbar: toc
```

**说明**：
- 主页通常显示欢迎信息和最近文章
- 右侧栏可以显示目录（如果主页有长内容）

### index_blog - 博客列表页

```yaml
index_blog:
  base_dir: blog
  menu_id: post
  leftbar: welcome, recent
  rightbar: toc
  nav_tabs:
    '最新发布': /
    '技术开发': /categories/tech-development/
    '系统运维': /categories/system-operations/
    '游戏世界': /categories/gaming-world/
```

**配置说明**：

| 字段 | 说明 |
|------|------|
| base_dir | 博客列表页路径为 `/blog/` |
| menu_id | 高亮侧边栏中 `id: post` 的菜单项 |
| nav_tabs | 顶部导航标签，键为标题，值为链接 |

**nav_tabs 使用场景**：
- 按分类筛选文章
- 按标签筛选文章
- 快速访问归档页面
- 访问专栏页面

### index_topic - 专栏列表页

```yaml
index_topic:
  base_dir: topic
  menu_id: post
```

**说明**：
- 专栏是一组相关文章的集合
- 通常不需要侧边栏组件

### index_wiki - 文档列表页

```yaml
index_wiki:
  base_dir: wiki
  menu_id: wiki
  leftbar: related, recent
  rightbar: null
  nav_tabs:
    'Stellar': /wiki/stellar/
    'Hexo': /wiki/hexo/
```

**说明**：
- 文档列表页展示所有文档项目
- `nav_tabs` 可以快速切换不同文档项目

### post - 博客文章内页

```yaml
post:
  menu_id: post
  leftbar: related, recent, timeline
  rightbar: ghrepo, toc
```

**推荐配置**：

| 场景 | leftbar | rightbar |
|------|---------|----------|
| 技术博客 | related, recent | toc, ghrepo |
| 生活博客 | recent, timeline | toc |
| 极简风格 | null | toc |

### topic - 专栏文章内页

```yaml
topic:
  menu_id: post
```

**说明**：
- 专栏文章通常继承 `post` 的配置
- 可以单独配置以区分普通文章

### wiki - 文档内页

```yaml
wiki:
  menu_id: wiki
  leftbar: tree, related, recent
  rightbar: ghrepo, toc
```

**说明**：
- `tree` 组件显示文档树形结构
- 适合多页面的文档项目

### notebooks - 笔记本列表页

```yaml
notebooks:
  base_dir: notebooks
  menu_id: notebooks
  leftbar: recent
  rightbar: null
```

**说明**：
- 笔记本是笔记的容器
- 列表页展示所有笔记本

### notes - 笔记列表页

```yaml
notes:
  menu_id: notebooks
  leftbar: tagtree, recent
  rightbar: null
```

**说明**：
- 显示某个笔记本内的所有笔记
- `tagtree` 显示笔记的标签树

### note - 笔记内页

```yaml
note:
  leftbar: tagtree, recent
  rightbar: toc
```

**说明**：
- 笔记内页的配置
- 可以在笔记本 YAML 中覆盖

### author - 作者信息页

```yaml
author:
  base_dir: author
  menu_id: post
  leftbar: recent, timeline
  rightbar: timeline
```

**说明**：
- 显示作者的文章列表
- 时间线展示作者的创作历程

### error_page - 错误页面

```yaml
error_page:
  menu_id: post
  '404': '/404.html'
  leftbar: recent, timeline
  rightbar: timeline
```

**说明**：
- 配置 404 等错误页面
- 提供导航帮助用户返回

### page - 自定义页面

```yaml
page:
  leftbar: recent
  rightbar: toc
```

**说明**：
- 使用 `layout: page` 的页面默认配置
- 可以在页面 front-matter 中覆盖

## 配置覆盖优先级

配置的优先级从高到低：

1. **页面 front-matter**
```yaml
---
leftbar: custom, components
rightbar: toc
---
```

2. **笔记本 YAML 配置**（仅笔记）
```yaml
# source/_data/notebooks/my-notebook.yml
leftbar: tagtree
rightbar: toc
```

3. **site_tree 配置**
```yaml
# _config_stellar.yml
site_tree:
  post:
    leftbar: related, recent
```

4. **主题默认配置**

## 配置示例

### 技术博客配置

```yaml
site_tree:
  home:
    leftbar: welcome, recent
    rightbar: null
  
  index_blog:
    base_dir: blog
    menu_id: post
    leftbar: welcome
    rightbar: null
    nav_tabs:
      '最新': /
      '技术': /categories/tech/
      '教程': /categories/tutorial/
      '归档': /archives/
  
  post:
    menu_id: post
    leftbar: related, recent
    rightbar: toc, ghrepo
  
  wiki:
    menu_id: wiki
    leftbar: tree, recent
    rightbar: toc
```

### 个人博客配置

```yaml
site_tree:
  home:
    leftbar: welcome, recent, timeline
    rightbar: null
  
  index_blog:
    menu_id: post
    leftbar: welcome, timeline
    rightbar: null
    nav_tabs:
      '首页': /
      '生活': /categories/life/
      '旅行': /categories/travel/
      '摄影': /categories/photo/
  
  post:
    menu_id: post
    leftbar: recent, timeline
    rightbar: toc
```

### 文档站点配置

```yaml
site_tree:
  home:
    leftbar: welcome
    rightbar: null
  
  index_wiki:
    base_dir: wiki
    menu_id: wiki
    leftbar: recent
    rightbar: null
    nav_tabs:
      '快速开始': /wiki/getting-started/
      'API 文档': /wiki/api/
      '配置指南': /wiki/config/
  
  wiki:
    menu_id: wiki
    leftbar: tree, related
    rightbar: toc
```

## 最佳实践

### 1. 侧边栏组件选择

- **左侧栏**：导航类组件（tree、tagtree、related）
- **右侧栏**：辅助类组件（toc、ghrepo）
- **避免过多**：每侧不超过 3 个组件

### 2. menu_id 设置

- 保持同类页面使用相同的 `menu_id`
- 与侧边栏菜单项的 `id` 对应
- 便于用户识别当前位置

### 3. nav_tabs 设计

- 标签数量控制在 5-7 个
- 标签文字简洁明了
- 按使用频率排序

### 4. base_dir 规划

- 使用语义化的路径名
- 保持 URL 结构清晰
- 避免过深的层级

## 常见问题

### 侧边栏组件不显示？

1. 检查组件名称拼写
2. 确认组件适用于当前页面类型
3. 验证是否被 front-matter 覆盖

### 如何隐藏侧边栏？

```yaml
leftbar: null
rightbar: null
```

### 如何在特定页面自定义？

在页面 front-matter 中设置：

```yaml
---
title: 我的页面
leftbar: custom, components
rightbar: toc
---
```

### nav_tabs 不显示？

1. 确认配置在列表页（index_blog、index_wiki）
2. 检查 YAML 缩进是否正确
3. 验证链接是否有效

## 相关配置

- [侧边栏配置](./侧边栏配置.md) - 配置主导航菜单
- [文章配置](./文章配置.md) - 配置文章相关选项
- [笔记本配置](./笔记本配置.md) - 配置笔记本和笔记

## 参考资源

- [Stellar 布局系统](https://xaoxuu.com/wiki/stellar/layout/)
- [侧边栏组件文档](https://xaoxuu.com/wiki/stellar/widgets/)
