utils.jq(()=>{$(function(){const o=document.getElementsByClassName("ds-sites");for(var r=0;r<o.length;r++){const e=o[r],i=e.dataset.api;if(i==null)continue;const n=def.avatar,d=def.cover;utils.request(e,i,async l=>{const c=await l.json();for(let t of c.content){var a='<div class="grid-cell site-card">';a+=`<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer" href="${t.url}">`,a+=`<img src="${t.cover||t.snapshot||t.screenshot}" onerror="javascript:this.removeAttribute('data-src');this.src='${d}';"/>`,a+='<div class="info">',a+=`<img src="${t.icon||t.avatar||n}" onerror="javascript:this.removeAttribute('data-src');this.src='${n}';"/>`,a+=`<span class="title">${t.title}</span>`,a+=`<span class="desc">${t.description||t.url}</span>`,a+="</div>",a+='<div class="labels">';for(let s of t.labels)s.lightness>75?a+=`<div class="label" style="background:#${s.color};color:hsla(${s.hue}, ${s.saturation}%, 20%, 1);">${s.name}</div>`:s.saturation>90&&s.lightness>40?a+=`<div class="label" style="background:#${s.color};color:hsla(${s.hue}, 50%, 20%, 1);">${s.name}</div>`:a+=`<div class="label" style="background:#${s.color};color:white">${s.name}</div>`;a+="</div>",a+="</a>",a+="</div>",$(e).find(".grid-box").append(a)}window.wrapLazyloadImages(e)})}})});
