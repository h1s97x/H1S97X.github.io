utils.jq(()=>{$(function(){const n=document.getElementsByClassName("ds-friends_and_posts");for(var o=0;o<n.length;o++){const e=n[o],r=e.dataset.api;if(r==null)continue;const i=def.avatar;utils.request(e,r,async l=>{const d=await l.json();for(let t of d.content||d){var s='<div class="grid-cell user-post-card">';s+='<div class="avatar-box">',s+=`<a class="card-link" target="_blank" rel="external nofollow noopener noreferrer" href="${t.html_url||t.url}">`,s+=`<img src="${t.avatar_url||t.avatar||t.icon||i}" onerror="javascript:this.removeAttribute('data-src');this.src='${i}';"/>`,s+=`<span class="title">${t.title||t.login}</span>`,s+="</a>",s+='<div class="labels">';for(let a of t.labels)a.lightness>75?s+=`<div class="label" style="background:#${a.color};color:hsla(${a.hue}, ${a.saturation}%, 20%, 1);">${a.name}</div>`:a.saturation>90&&a.lightness>40?s+=`<div class="label" style="background:#${a.color};color:hsla(${a.hue}, 50%, 20%, 1);">${a.name}</div>`:s+=`<div class="label" style="background:#${a.color};color:white">${a.name}</div>`;if(s+="</div>",s+="</div>",s+='<div class="previews">',t.description?s+=`<div class="desc">${t.description||t.issue_number||""}</div>`:s+=`<div class="desc">#${t.issue_number}</div>`,s+='<div class="posts">',t.posts?.length>0)for(let a of t.posts)s+=`<a class="post-link" target="_blank" rel="external nofollow noopener noreferrer" href="${a.link}">`,s+=`<span class="title">${a.title}</span>`,s+=`<span class="date">${a.published}</span>`,s+="</a>";else s+=`<span class="no-post">${t.feed?.length>0?"RSS \u89E3\u6790\u5931\u8D25":"\u672A\u8BBE\u7F6E RSS \u94FE\u63A5"}</span>`;s+="</div>",s+="</div>",s+="</div>",$(e).find(".grid-box").append(s)}window.wrapLazyloadImages(e)})}})});
