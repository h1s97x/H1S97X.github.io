var searchCache=null,searchCacheKey="search_cache_v1",searchFunc=function(o,u,y,e,r){function v(n){const l=[];for(let s=0;s<n.length;s++)for(let c=s+1;c<=Math.min(s+3,n.length);c++)l.push(n.slice(s,c).join(" "));return l}function i(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function d(n){var l=document.getElementById(e);if(l&&!l._searchInitialized){l._searchInitialized=!0;var g=document.getElementById(r),s=document.getElementById(y);l.addEventListener("input",function(){var c=[],I=v(this.value.trim().toLowerCase().split(" ")).sort(function(t,a){return a.split(" ").length-t.split(" ").length});if(g.innerHTML="",this.value.trim().length<=0){s.setAttribute("searching","false");return}if(s.setAttribute("searching","true"),n.forEach(function(t){if(t.content?.trim().length&&!(u&&!t.path.includes(u))){var a=0,C=t.title?.trim()||"Untitled",T=C.toLowerCase(),E=t.content,A=E.toLowerCase(),h=t.path.startsWith("//")?t.path.slice(1):t.path;h=h.replace(/\/?index\.html$/,"/"),h=h.replace(/\.html$/,"/");var S=-1,p=-1,f=-1;if(I.forEach(function(m){S=T.indexOf(m),p=A.indexOf(m),(S>=0||p>=0)&&(a+=1,p<0&&(p=0),f<0&&(f=p))}),a>0){const m=document.createElement("li"),x=document.createElement("a");x.href=h;const w=document.createElement("span");if(w.className="search-result-title",w.textContent=C,x.appendChild(w),f>=0){var M=Math.max(0,f-20),O=Math.min(E.length,f+80);M===0&&(O=100);var L=E.substring(M,O),N=new RegExp(I.map(i).join("|"),"gi");L=L.replace(N,function(j){return'<span class="search-keyword">'+j+"</span>"});const b=document.createElement("p");b.className="search-result-content",b.innerHTML=L+"...",x.appendChild(b)}m.appendChild(x),c.push({rank:a,element:m})}}}),c.length){c.sort(function(a,C){return C.rank-a.rank});const t=document.createElement("ul");t.className="search-result-list",c.forEach(function(a){t.appendChild(a.element)}),g.innerHTML="",g.appendChild(t)}})}}if(searchCache)d(searchCache);else{const n=setInterval(()=>{searchCache&&(clearInterval(n),d(searchCache))},100)}};utils.jq(()=>{(function(){var r=ctx.search.path;r.startsWith("/")&&(r=r.substring(1)),r=ctx.root+r;try{var v=localStorage.getItem(searchCacheKey);v&&(searchCache=JSON.parse(v))}catch(i){console.warn("\u641C\u7D22\u7F13\u5B58\u89E3\u6790\u5931\u8D25",i)}fetch(r).then(i=>i.json()).then(i=>{searchCache=i;try{localStorage.setItem(searchCacheKey,JSON.stringify(i))}catch(d){console.warn("\u641C\u7D22\u7F13\u5B58\u5199\u5165\u5931\u8D25",d)}})})();var o=$("input#search-input");if(o.length==0)return;var u=document.querySelector("div#search-result");o.focus(function(){var e=ctx.search.path;e.startsWith("/")&&(e=e.substring(1)),e=ctx.root+e;const r=o.attr("data-filter")||"";searchFunc(e,r,"search-wrapper","search-input","search-result")}),o.keydown(function(e){e.which==13&&e.preventDefault()}),new MutationObserver(function(e){const r=u.querySelector(".search-result-list li");$(".search-wrapper").toggleClass("noresult",!r)}).observe(u,{childList:!0,subtree:!0})});
