utils.jq(()=>{$(function(){const s=document.getElementsByClassName("ds-waline");for(var n=0;n<s.length;n++){const t=s[n],c=parseInt(t.getAttribute("limit"))||10,r=t.dataset.api;if(r==null)continue;const l=r+"/comment?type=recent&count="+c,o=def.avatar;utils.request(t,l,async i=>{(await i.json()).forEach((e,d)=>{var a='<div class="timenode" index="'+d+'">';a+='<div class="header">',a+='<div class="user-info">',a+='<img src="'+(e.avatar||o)+`" onerror="javascript:this.src='`+o+`';">`,a+="<span>"+e.nick+"</span>",a+="</div>",a+="<span>"+new Date(e.time).toLocaleString()+"</span>",a+="</div>",a+='<a class="body" href="'+e.url+"#"+e.objectId+'" target="_blank" rel="external nofollow noopener noreferrer">',a+=e.comment.replace(/<a\b[^>]*>(.*?)<\/a>/g,"$1"),a+="</a>",a+="</div>",$(t).append(a)})})}})});
