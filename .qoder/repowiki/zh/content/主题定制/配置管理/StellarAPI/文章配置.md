# 文章配置

文章配置（`article`）控制博客文章和专栏的显示样式、封面、摘要、许可协议等选项。

## 配置项总览

| 字段 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| type | string | tech | 文章类型，影响布局风格 |
| indent | boolean | false | 是否缩进两个文字宽度 |
| cover_ratio | number | 2 | 封面图宽高比 |
| banner_ratio | number | 2.5 | 文章内横幅宽高比 |
| auto_banner | boolean | false | 是否自动搜索横幅图片 |
| auto_excerpt | number | 128 | 自动摘要长度（字符数） |
| category_color | object | - | 分类颜色配置 |
| license | string | - | 文章许可协议 |
| share | array | - | 分享按钮配置 |
| related_posts | object | - | 相关文章配置 |

## 基础配置

### type - 文章类型

控制文章的布局风格。

**可选值**：
- `tech`：技术类文章（默认），紧凑布局
- `story`：图文类文章，段落间距大，适合阅读

**配置示例**：

```yaml
article:
  type: tech
```

**在 front-matter 中覆盖**：

```yaml
---
type: story
---
```

### indent - 段落缩进

是否缩进两个文字宽度，适合文字类博客。

**配置示例**：

```yaml
article:
  indent: true  # 启用缩进
```

**适用场景**：
- 文学创作
- 散文随笔
- 长篇阅读

## 图片配置

### cover_ratio - 封面图宽高比

文章列表页封面图的宽高比。

**配置示例**：

```yaml
article:
  cover_ratio: 2  # 宽度是高度的 2 倍
```

**常用比例**：
- `1`：正方形（1:1）
- `1.5`：经典照片比例（3:2）
- `2`：宽屏（2:1）
- `2.35`：电影宽屏

### banner_ratio - 横幅宽高比

文章内页顶部横幅的宽高比。

**配置示例**：

```yaml
article:
  banner_ratio: 2.5
```

### auto_banner - 自动横幅

是否根据文章标签自动搜索横幅图片（从 Unsplash）。

**配置示例**：

```yaml
article:
  auto_banner: true
```

**注意事项**：
- 需要网络访问 Unsplash
- 图片质量和相关性不可控
- 建议手动指定横幅

**手动指定横幅**：

```yaml
---
banner: /images/my-banner.jpg
---
```

## 摘要配置

### auto_excerpt - 自动摘要

当文章没有指定 `excerpt` 和 `description` 时，自动提取的内容长度。

**配置示例**：

```yaml
article:
  auto_excerpt: 128  # 提取 128 个字符
```

**手动指定摘要**：

```yaml
---
excerpt: 这是文章摘要
description: 这是文章描述
---
```

**摘要优先级**：
1. front-matter 的 `excerpt`
2. front-matter 的 `description`
3. 自动提取（`auto_excerpt` 长度）

## 分类配置

### category_color - 分类颜色

为不同分类设置颜色标识。

**配置示例**：

```yaml
article:
  category_color:
    '技术开发': '#1BCDFC'
    '系统运维': '#3DC550'
    '游戏世界': '#FF9800'
    '学术学习': '#9C27B0'
    '个人随笔': '#F44336'
    '软件工具': '#FFC107'
```

**颜色选择建议**：
- 使用 HEX 格式（如 `#1BCDFC`）
- 保持色彩对比度
- 不同分类使用不同色系

## 许可协议配置

### license - 文章许可

设置文章的版权许可协议。

**配置示例**：

```yaml
article:
  license: '本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) 许可协议，转载请注明出处。'
```

**常用许可协议**：

```yaml
# CC BY 4.0 - 署名
license: '本文采用 [CC BY 4.0](https://creativecommons.org/licenses/by/4.0/) 许可协议'

# CC BY-SA 4.0 - 署名-相同方式共享
license: '本文采用 [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/) 许可协议'

# CC BY-NC-SA 4.0 - 署名-非商业-相同方式共享
license: '本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) 许可协议'

# 版权所有
license: '版权所有 © 2025 作者姓名，未经授权禁止转载'

# 不显示许可协议
license: false
```

**在 front-matter 中覆盖**：

```yaml
---
license: '本文版权归作者所有'
---
```

## 分享配置

### share - 分享按钮

配置文章底部的分享按钮。

**配置示例**：

```yaml
article:
  share: [wechat, weibo, email, link]
```

**可用分享方式**：
- `wechat`：微信（生成二维码）
- `weibo`：微博
- `twitter`：Twitter
- `facebook`：Facebook
- `email`：邮件
- `link`：复制链接

**禁用分享**：

```yaml
article:
  share: false
```

**在 front-matter 中覆盖**：

```yaml
---
share: [twitter, facebook]
---
```

## 相关文章配置

### related_posts - 相关文章

显示相关文章推荐（需要安装插件）。

**安装插件**：

```bash
npm install hexo-related-popular-posts
```

**配置示例**：

```yaml
article:
  related_posts:
    enable: true
    max_count: 5
```

**配置项**：

| 字段 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| enable | boolean | false | 是否启用相关文章 |
| max_count | number | 5 | 最多显示数量 |

## 完整配置示例

### 技术博客配置

```yaml
article:
  type: tech
  indent: false
  cover_ratio: 2
  banner_ratio: 2.5
  auto_banner: false
  auto_excerpt: 200
  category_color:
    '前端开发': '#1BCDFC'
    '后端开发': '#3DC550'
    '运维部署': '#FF9800'
    '数据库': '#9C27B0'
  license: '本文采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) 许可协议'
  share: [twitter, facebook, email, link]
  related_posts:
    enable: true
    max_count: 5
```

### 个人博客配置

```yaml
article:
  type: story
  indent: true
  cover_ratio: 1.5
  banner_ratio: 2
  auto_banner: false
  auto_excerpt: 150
  category_color:
    '生活': '#F44336'
    '旅行': '#FF9800'
    '摄影': '#3DC550'
    '读书': '#9C27B0'
  license: '版权所有，转载请联系作者'
  share: [wechat, weibo, link]
  related_posts:
    enable: false
```

### 极简配置

```yaml
article:
  type: tech
  auto_excerpt: 128
  license: false
  share: false
```

## 配置覆盖

文章配置可以在多个层级覆盖：

### 1. 全局配置（_config_stellar.yml）

```yaml
article:
  type: tech
  license: 'CC BY-NC-SA 4.0'
```

### 2. 专栏配置（source/_data/topic/）

```yaml
# source/_data/topic/my-series.yml
article:
  type: story
  license: '专栏版权声明'
```

### 3. 文章配置（front-matter）

```yaml
---
type: story
license: '特殊版权声明'
share: false
---
```

**优先级**：文章 > 专栏 > 全局

## 最佳实践

### 1. 文章类型选择

- **技术文章**：使用 `type: tech`，紧凑布局
- **图文并茂**：使用 `type: story`，增大间距
- **长篇阅读**：启用 `indent: true`

### 2. 图片比例

- **封面图**：建议 `cover_ratio: 2`，适合列表展示
- **横幅图**：建议 `banner_ratio: 2.5`，视觉冲击力强
- **保持一致**：全站使用统一比例

### 3. 摘要长度

- **技术文章**：100-150 字符
- **长文章**：150-200 字符
- **短文章**：50-100 字符

### 4. 许可协议

- **开源分享**：使用 CC BY 或 CC BY-SA
- **限制商用**：使用 CC BY-NC-SA
- **版权保护**：自定义版权声明

### 5. 分享按钮

- **国内博客**：wechat, weibo, link
- **国际博客**：twitter, facebook, email
- **技术博客**：twitter, link

## 常见问题

### 摘要显示不正确？

1. 检查是否设置了 `excerpt` 或 `description`
2. 调整 `auto_excerpt` 长度
3. 使用 `<!-- more -->` 标记手动截断

### 分类颜色不生效？

1. 确认分类名称完全匹配（区分大小写）
2. 检查颜色格式是否正确（HEX）
3. 清理缓存重新构建

### 相关文章不显示？

1. 确认已安装 `hexo-related-popular-posts` 插件
2. 检查 `enable: true`
3. 确保有足够的文章数量

### 如何禁用某篇文章的许可协议？

在文章 front-matter 中设置：

```yaml
---
license: false
---
```

## 相关配置

- [笔记本配置](./笔记本配置.md) - 笔记的类似配置
- [样式配置](./样式配置.md) - 文章样式定制
- [标签插件配置](./标签插件配置.md) - 文章内标签插件

## 参考资源

- [Creative Commons 许可协议](https://creativecommons.org/licenses/)
- [Unsplash 图片库](https://unsplash.com/)
- [hexo-related-popular-posts 插件](https://github.com/tea3/hexo-related-popular-posts)
