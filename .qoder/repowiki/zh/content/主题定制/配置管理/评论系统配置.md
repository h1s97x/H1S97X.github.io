# 评论系统配置

Stellar 主题支持多种评论系统：Giscus、Twikoo、Waline、Artalk、Utterances、Beaudar。

## 配置概览

```yaml
comments:
  service: giscus
  comment_title: 快来参与讨论吧~
  lazyload: true
  custom_css: ''
```

## service - 评论服务

选择使用的评论系统。

**可选值**：
- `giscus` - 基于 GitHub Discussions（推荐）
- `twikoo` - 轻量级评论系统
- `waline` - 简洁的评论系统
- `artalk` - 自托管评论系统
- `utterances` - 基于 GitHub Issues
- `beaudar` - Utterances 的中文版

## Giscus 配置（推荐）

基于 GitHub Discussions，无需后端服务器。

### 配置步骤

1. 在 GitHub 仓库启用 Discussions
2. 访问 [Giscus 官网](https://giscus.app/zh-CN)
3. 填写仓库信息获取配置
4. 复制配置到 `_config_stellar.yml`

### 配置示例

```yaml
comments:
  service: giscus
  giscus:
    src: https://giscus.app/client.js
    data-repo: username/repo
    data-repo-id: R_xxxxx
    data-category: Announcements
    data-category-id: DIC_xxxxx
    data-mapping: pathname
    data-strict: 0
    data-reactions-enabled: 1
    data-emit-metadata: 0
    data-input-position: top
    data-theme: preferred_color_scheme
    data-lang: zh-CN
    data-loading: lazy
    crossorigin: anonymous
```

### 配置项说明

| 字段 | 说明 |
|------|------|
| data-repo | GitHub 仓库（格式：username/repo） |
| data-repo-id | 仓库 ID |
| data-category | Discussion 分类 |
| data-category-id | 分类 ID |
| data-mapping | 页面与 Discussion 的映射方式 |
| data-input-position | 评论框位置（top/bottom） |
| data-theme | 主题（preferred_color_scheme 自动适配） |
| data-lang | 语言（zh-CN/en） |

## Twikoo 配置

轻量级、无后端的评论系统。

### 配置示例

```yaml
comments:
  service: twikoo
  twikoo:
    js: https://gcore.jsdelivr.net/npm/twikoo@1.6/dist/twikoo.all.min.js
    envId: https://your-vercel-url
```

### 部署 Twikoo

1. Fork [Twikoo 仓库](https://github.com/imaegoo/twikoo)
2. 部署到 Vercel
3. 获取 Vercel 地址作为 `envId`

## Waline 配置

简洁、安全的评论系统。

### 配置示例

```yaml
comments:
  service: waline
  waline:
    js: https://gcore.jsdelivr.net/npm/@waline/client@3.1/dist/waline.js
    css: https://gcore.jsdelivr.net/npm/@waline/client@3.1/dist/waline.css
    serverURL: https://your-waline-server.vercel.app
    commentCount: true
    pageview: false
```

### 部署 Waline

参考 [Waline 官方文档](https://waline.js.org/)

## 通用配置

### comment_title - 评论标题

评论区域的标题文字。

```yaml
comments:
  comment_title: 快来参与讨论吧~
```

### lazyload - 懒加载

是否延迟加载评论系统。

```yaml
comments:
  lazyload: true  # 推荐开启
```

**优势**：
- 加快页面加载速度
- 减少不必要的请求
- 改善用户体验

### custom_css - 自定义样式

为评论系统加载自定义 CSS。

```yaml
comments:
  custom_css: /css/custom-comment.css
```

## 最佳实践

### 1. 选择评论系统

| 场景 | 推荐方案 |
|------|----------|
| GitHub 托管博客 | Giscus |
| 技术博客 | Giscus / Utterances |
| 个人博客 | Twikoo / Waline |
| 需要自托管 | Artalk |

### 2. 性能优化

- 启用 `lazyload: true`
- 使用 CDN 加速资源
- 定期清理垃圾评论

### 3. 隐私保护

- 不收集不必要的用户信息
- 使用 HTTPS
- 遵守 GDPR 等隐私法规

## 相关资源

- [Giscus 官网](https://giscus.app/zh-CN)
- [Twikoo 文档](https://twikoo.js.org/)
- [Waline 文档](https://waline.js.org/)
